<!DOCTYPE html> 
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Header</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap-grid.min.css">
    <style>
        html, body {
            margin: 0;
            padding: 0;
            font-family: 'Outfit', sans-serif;
        }
        :root{--brand:#26547C;--accent:#FFE66D;--accent-hover:#FFF39A;--drawer-bg:#1e4466}

        .header{height:115px;background-color:var(--brand);}

        /* Stile della navigazione */
        .nav-list {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 2rem;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .nav-list .nav-item {
            margin: 0;
        }

        .nav-list .nav-link {
            color: #ffffff;
            text-decoration: none;
            font-weight: 700;
        }

        /* Font Outfit ExtraBold 24px per i link, con aggiustamenti responsivi */
        .nav-list .nav-link {
            font-family: 'Outfit', sans-serif;
            font-weight: 800;
            font-size: 24px;
            line-height: 1;
        }

        .logo{
            padding-left: 30px;
            height: 50px;
        }

        /* Responsivo: riduce spaziatura e dimensione font su schermi medi */
        @media (max-width: 992px) {
            .nav-list {
                gap: 1.5rem;
            }
            .nav-list .nav-link {
                font-size: 18px;
            }
        }

        /* Schermi piccoli: permette il wrapping e imposta verticalmente se necessario */
        @media (max-width: 576px) {
            .header{height:72px;}
            .logo{
            padding-left: 10px;
            }
            .nav-list .nav-item:nth-child(n+4){
                display: none;
            }

            .menu-toggle{
                display: inline-block !important;
                background: none;
                border: none;
                color: #fff;
                font-size: 24px;
                font-weight: 800;
                margin-left: 0.75rem;
            }

            .nav-list.expanded{
                position: absolute;
                left: 0;
                right: 0;
                top: 72px;
                background: #26547C;
                flex-direction: column;
                gap: 0.5rem;
                z-index: 1000;
            }

            .nav-list.expanded .nav-item{
                width: 100%;
                text-align: center;
            }

            .nav-list .nav-link{
                font-size: 16px;
            }
        }

        /* Aggiustamenti Desktop */
        @media (min-width: 992px) {
            .nav-list {
                align-items: center;
                justify-content: flex-start;
                gap: 5.5rem;
                margin-left: 0;
            }

            .header .col-9 {
                justify-content: flex-start;
                min-width: 0;
                padding-left: 8px;
            }

            .nav-list .nav-item:nth-child(4) {
                margin-left: auto;
            }

            .nav-list {
                --first-group-shift: -100px;
                min-width: 0;
            }

            .nav-list .nav-item:nth-child(-n+3) {
                display: inline-block;
                transform: translateX(var(--first-group-shift));
            }

            @media (max-width: 1400px) and (min-width: 992px) {
                .nav-list { --first-group-shift: -60px; }
            }
            @media (max-width: 1300px) and (min-width: 992px) {
                .nav-list { --first-group-shift: -30px; gap: 4rem; }
            }
            @media (max-width: 1200px) and (min-width: 992px) {
                .nav-list { --first-group-shift: 0; gap: 2.5rem; }
            }
            @media (max-width: 1100px) and (min-width: 992px) {
                .nav-list { gap: 1.5rem; }
            }
            @media (max-width: 1024px) and (min-width: 992px) {
                .nav-list { flex-wrap: wrap; gap: 0.75rem; }
                .nav-list .nav-item:nth-child(-n+3) .nav-link { font-size: 20px; }
            }

            .logo { position: relative; z-index: 2000; }
            .nav-list .nav-item { z-index: 100; position: relative; }

            .nav-list .nav-item:nth-child(-n+3) .nav-link{font-size:24px;line-height:1}

            .nav-list .nav-item:nth-child(n+4) .nav-link{font-size:15px; font-weight:400; transform:translateY(-15px);display:inline-block}

            .side-drawer .drawer-close{display:none}
        }

        .nav-link {
            position: relative;
            transition: color 0.3s ease;
        }

        .nav-link:hover{color:var(--accent-hover);text-decoration:underline}

        /* Stili per il menu mobile */
        .nav-list.mobile-open {
            display: flex !important;
            flex-direction: column;
            position: absolute;
            top: 100%;
            right: 0;
            background: #fff;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 1rem;
            z-index: 1000;
        }

        .menu-toggle {
            font-size: 2rem;
            background: none;
            border: none;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .menu-toggle.active {
            transform: rotate(45deg);
        }

        body{overflow-x:hidden;}
        ul { padding: 0; margin: 0; list-style: none; }
        a { text-decoration: none; color: white; transition: all 0.3s ease; }

        /* INTESTAZIONE BASE */
        .header {
            background-color: #26547C;
            color: white;
            position: relative;
            z-index: 1000;
        }

        .logo { max-height: 50px; vertical-align: middle; }

        /* CLASSI DI VISIBILITÀ */
        .desktop-nav-container { display: flex; min-width: 0; } 
        .mobile-header-elements { display: none; } 

        /* STILI CONDIVISI */
        .nav-item, .mobile-nav-item { position: relative; }

        /* Stile dei Link Principali */
        .nav-link, .mobile-link {
            font-weight: 700;
            font-size: 18px;
            cursor: pointer;
            white-space: nowrap;
            display: block;
            padding: 5px 0;
            border-bottom: 3px solid transparent; 
            line-height: 1.2;
        }

        /* SOTTOLINEATURA SOLO QUANDO ATTIVO */
        .nav-link:hover, .mobile-link:hover { color: #FFE66D; }
        .nav-link.active-state, .mobile-link.active-state { 
            color: #FFE66D; 
            border-bottom: 3px solid #FFE66D; 
        }

        .arrow-icon {
            width: 18px;
            height: 18px;
            margin-left: 10px;
            vertical-align: baseline;
        }

        .arrow-icon-small {
            width: 14px;
            height: 14px;
            margin-left: 8px;
            vertical-align: baseline;
        }

        /* FRECCIA DIVENTA GIALLA AL HOVER sulla singola voce del menu */
        .dropdown-menu li a:hover .arrow-icon {
            filter: brightness(0) saturate(100%) invert(85%) sepia(52%) saturate(445%) hue-rotate(358deg) brightness(103%) contrast(101%);
        }

        /* STILE MENU A TENDINA CON ANIMAZIONE SMOOTH */
        .dropdown-menu {
            position: absolute;
            left: 0;
            min-width: 170px;
            background: var(--brand);
            padding: 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 9999;
            border-radius: 4px;
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transform: translateY(-10px);
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), 
                        opacity 0.3s ease, 
                        transform 0.3s ease;
        }

        .dropdown-menu.active { 
            max-height: 500px;
            opacity: 1;
            transform: translateY(0);
            padding: 10px 0;
        }

        /* SU DESKTOP: dropdown parte dalla fine dell'header (75px) */
        @media (min-width: 992px) {
            .dropdown-menu {
                position: fixed;
                top: 75px;
                left: auto;
            }
        }
        /* Aggiustamento posizione Dropdown per le voci secondarie (4, 5, 6...) su Desktop */
        @media (min-width: 992px) {
            .nav-list .nav-item:nth-child(n+4) .dropdown-menu {
                top: 115px; 
            }
        }
        .dropdown-menu li a {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            font-size: 24px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            white-space: nowrap;
        }
        


        .dropdown-menu li:last-child a { border-bottom: none; }
        .dropdown-menu li a:hover{color:var(--accent)}
        .drawer-list { list-style: none; padding: 0; display: none; }


        /* VERSIONE MOBILE (Massimo 992px) */
        @media (max-width: 992px) {
            
            .desktop-nav-container { display: none !important; }
            
            /* Contenitore Elementi Mobile */
            .mobile-header-elements { 
                display: flex !important; 
                align-items: center;
                justify-content: flex-end; 
                width: 100%; 
                gap: 20px;
                height: 100%;
            }

            .mobile-link { font-size: 16px; margin: 0; padding-top: 5px; padding-bottom: 5px; }

            .mobile-nav-item { display: none; }
            
            /* PULSANTE + */
            .menu-toggle {
                background: none;
                border: none;
                color: white;
                font-size: 32px;
                font-weight: 700;
                cursor: pointer;
                padding: 0;
                margin-left: 5px;
                line-height: 0.8; 
                display: flex;
                align-items: center;
                height: 30px; 
            }

            .mobile-nav-item:last-of-type .dropdown-menu {
                left: auto;
                right: 0;
                transform: translateX(10px);
            }

            /* CASSETTO LATERALE */
            .side-drawer {
                position: fixed; top: 0; right: -50vw; width: 50vw; height: 100vh;
                background-color: #26547C;
                transition: right 0.8s cubic-bezier(0.25, 1, 0.5, 1);
                z-index: 1500; padding-top: 80px; 
                box-shadow: -5px 0 20px rgba(0,0,0,0.4);
                overflow-y: auto;
            }
            .side-drawer.open { right: 0; }

            .side-drawer .drawer-close {
                position: absolute;
                top: 12px;
                left: 12px;
                background: transparent;
                border: none;
                color: white;
                font-size: 26px;
                line-height: 1;
                cursor: pointer;
                z-index: 1600;
                padding: 6px;
            }
            .side-drawer .drawer-close:focus { outline: 2px solid rgba(255,255,255,0.2); border-radius: 4px; }

            @media (max-width: 576px) {
                .side-drawer { width: 100vw; right: -100vw; }
                .side-drawer.open { right: 0; }
            }

            .drawer-list { list-style: none; padding: 0;display: block; }
            .drawer-item { border-bottom: 1px solid rgba(255,255,255,0.1); }
            
            .drawer-link {
                display: flex; justify-content: space-between;
                padding: 15px 20px; font-weight: 700; font-size: 24px; color: white;
            }
            .drawer-link.active-color{color:var(--accent)}

            /* ANIMAZIONE SMOOTH PER SUBMENU DRAWER */
            .drawer-submenu {
                background: var(--drawer-bg);
                padding: 0;
                max-height: 0;
                overflow: hidden;
                opacity: 0;
                transition: max-height 0.8s cubic-bezier(0.4, 0, 0.2, 1), 
                            opacity 0.3s ease;
            }
            
            .drawer-submenu.open { 
                max-height: 500px;
                opacity: 1;
            }
            
            .drawer-submenu li a {
                padding: 12px 30px; font-size: 24px; display: block; color: #ddd;
                border-bottom: 1px solid rgba(255,255,255,0.05);
            }
            .drawer-submenu li a:hover { color: #FFE66D; }
            
            /* FRECCIA GIALLA AL HOVER NEL DRAWER */
            .drawer-submenu li a:hover .arrow-icon {
                filter: brightness(0) saturate(100%) invert(85%) sepia(52%) saturate(445%) hue-rotate(358deg) brightness(103%) contrast(101%);
            }
        }
    </style>
</head>

<body>
    <div class="header row m-0 p-0 align-items-center">
        <div class="col-2 d-flex align-items-center">
            <a href="#top">
                <img src="imgs/logotipo_mic.svg" class="logo" alt="Logo">
            </a>
        </div>

        <div class="col-9 d-flex justify-content-end align-items-center" style="position: static;">
            
            <div class="desktop-nav-container">
                <ul class="nav-list">
                    <li class="nav-item"><a href="#" class="nav-link dt-trigger">Visita</a>
                        <ul class="dropdown-menu">
                            <li><a href="#">Prenota ora <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                            <li><a href="#">Didattica per le scuole <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                        </ul>
                    </li>
                    <li class="nav-item"><a href="#" class="nav-link dt-trigger">Cosa vedere</a>
                        <ul class="dropdown-menu">
                            <li><a href="#">Le Collezioni <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                            <li><a href="#">Calendario eventi <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                        </ul>
                    </li>
                    <li class="nav-item"><a href="#" class="nav-link dt-trigger">Info</a>
                        <ul class="dropdown-menu">
                            <li><a href="#">Chi siamo <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                            <li><a href="#">Dove siamo <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                            <li><a href="#">News <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                        </ul>
                    </li>
                    <li class="nav-item"><a href="#" class="nav-link dt-trigger">CONSERVAZIONE</a>
                        <ul class="dropdown-menu">
                            <li><a href="#" style="font-size: 16px;">Depositi <img src="imgs/freccetta.svg" class="arrow-icon-small" alt=""></a></li>
                            <li><a href="#" style="font-size: 16px;">Restauri <img src="imgs/freccetta.svg" class="arrow-icon-small" alt=""></a></li>
                            <li><a href="#" style="font-size: 16px;">Progetti <img src="imgs/freccetta.svg" class="arrow-icon-small" alt=""></a></li>
                        </ul>
                    </li>
                    <li class="nav-item"><a href="#" class="nav-link dt-trigger">RISORSE</a>
                        <ul class="dropdown-menu">
                            <li><a href="#" style="font-size: 16px;">Archivio Fotografico <img src="imgs/freccetta.svg" class="arrow-icon-small" alt=""></a></li>
                            <li><a href="#" style="font-size: 16px;">Biblioteca <img src="imgs/freccetta.svg" class="arrow-icon-small" alt=""></a></li>
                            <li><a href="#" style="font-size: 16px;">Rivista Faenza <img src="imgs/freccetta.svg" class="arrow-icon-small" alt=""></a></li>
                        </ul>
                    </li>
                    <li class="nav-item"><a href="#" class="nav-link dt-trigger">SHOP</a>
                        <ul class="dropdown-menu">
                            <li><a href="#" style="font-size: 16px;">Libri <img src="imgs/freccetta.svg" class="arrow-icon-small" alt=""></a></li>
                            <li><a href="#" style="font-size: 16px;">Gadget <img src="imgs/freccetta.svg" class="arrow-icon-small" alt=""></a></li>
                            <li><a href="#" style="font-size: 16px;">Merchandising <img src="imgs/freccetta.svg" class="arrow-icon-small" alt=""></a></li>
                        </ul>
                    </li>
                </ul>
            </div>

            <div class="mobile-header-elements">
                <button class="menu-toggle" id="menuToggle" aria-label="Menu">+</button>
            </div>

        </div>
    </div>

    <div class="side-drawer" id="sideDrawer">
        <button class="drawer-close" id="drawerClose" aria-label="Chiudi menu">✕</button>
        <ul class="drawer-list">
            
            <li class="drawer-item">
                <a href="#" class="drawer-link accordion-trigger">Visita <span>+</span></a>
                <ul class="drawer-submenu">
                    <li><a href="#">Prenota ora <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                    <li><a href="#">Didattica per le scuole <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                </ul>
            </li>

            <li class="drawer-item">
                <a href="#" class="drawer-link accordion-trigger">Cosa vedere <span>+</span></a>
                <ul class="drawer-submenu">
                    <li><a href="#">Le Collezioni <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                    <li><a href="#">Calendario eventi <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                </ul>
            </li>

            <li class="drawer-item">
                <a href="#" class="drawer-link accordion-trigger">Info <span>+</span></a>
                <ul class="drawer-submenu">
                    <li><a href="#">Chi siamo <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                    <li><a href="#">Dove siamo <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                    <li><a href="#">News <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                </ul>
            </li>

            <li class="drawer-item">
                <a href="#" class="drawer-link accordion-trigger">Conservazione <span>+</span></a>
                <ul class="drawer-submenu">
                    <li><a href="#">Depositi <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                    <li><a href="#">Progetti <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                    <li><a href="#">Restauri <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                </ul>
            </li>

            <li class="drawer-item">
                <a href="#" class="drawer-link accordion-trigger">Risorse <span>+</span></a>
                <ul class="drawer-submenu">
                    <li><a href="#">Archivio Fotografico <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                    <li><a href="#">Biblioteca <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                    <li><a href="#">Rivista Faenza <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                </ul>
            </li>

            <li class="drawer-item">
                <a href="#" class="drawer-link accordion-trigger">Shop <span>+</span></a>
                <ul class="drawer-submenu">
                    <li><a href="#">Libri <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                    <li><a href="#">Gadget <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                    <li><a href="#">Merchandising <img src="imgs/freccetta.svg" class="arrow-icon" alt=""></a></li>
                </ul>
            </li>
        </ul>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded',()=>{
            const sideDrawer=document.getElementById('sideDrawer'),
                  menuToggle=document.getElementById('menuToggle');
            
            document.addEventListener('click',e=>{
                const dt=e.target.closest('.dt-trigger');
                if(dt){
                    e.preventDefault();
                    e.stopPropagation();
                    const menu=dt.nextElementSibling;
                    
                    // Chiudi tutti i menu aperti
                    document.querySelectorAll('.dropdown-menu.active').forEach(m=>{
                        m.classList.remove('active');
                    });
                    document.querySelectorAll('.dt-trigger.active-state').forEach(t=>{
                        t.classList.remove('active-state');
                    });
                    
                    // Apri solo il menu cliccato
                    if(menu){
                        menu.classList.add('active');
                        dt.classList.add('active-state');
                    }
                    return;
                }
                
                if(e.target.closest('#menuToggle')){
                    e.stopPropagation();
                    sideDrawer.classList.toggle('open');
                    menuToggle.textContent=sideDrawer.classList.contains('open')?'-':'+';
                    return;
                }
                
                if(e.target.closest('.accordion-trigger')){
                    e.preventDefault();
                    const btn=e.target.closest('.accordion-trigger'),
                          submenu=btn.nextElementSibling;
                    
                    // Chiudi tutti i submenu aperti nel drawer
                    document.querySelectorAll('.drawer-submenu.open').forEach(m=>{
                        if(m !== submenu) {
                            m.classList.remove('open');
                            const parentBtn = m.previousElementSibling;
                            if(parentBtn) {
                                parentBtn.querySelector('span').textContent = '+';
                                parentBtn.classList.remove('active-color');
                            }
                        }
                    });
                    
                    // Toggle il submenu cliccato
                    if(submenu){
                        submenu.classList.toggle('open');
                        btn.querySelector('span').textContent=submenu.classList.contains('open')?'-':'+';
                        btn.classList.toggle('active-color',submenu.classList.contains('open'));
                    }
                    return;
                }
                
                if(e.target.closest('#drawerClose')){
                    e.stopPropagation();
                    sideDrawer.classList.remove('open');
                    menuToggle.textContent='+';
                    return;
                }
                
                if(!e.target.closest('.nav-item')&&!e.target.closest('.mobile-nav-item')){
                    document.querySelectorAll('.dropdown-menu.active').forEach(m=>m.classList.remove('active'));
                    document.querySelectorAll('.dt-trigger.active-state').forEach(t=>t.classList.remove('active-state'));
                }
                
                if(sideDrawer.classList.contains('open')&&!sideDrawer.contains(e.target)&&!menuToggle.contains(e.target)){
                    sideDrawer.classList.remove('open');
                    menuToggle.textContent='+';
                }
            });
        });
    </script>
</body>
</html>